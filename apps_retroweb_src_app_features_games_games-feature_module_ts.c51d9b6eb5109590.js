"use strict";(self.webpackChunkretroweb=self.webpackChunkretroweb||[]).push([["apps_retroweb_src_app_features_games_games-feature_module_ts"],{43271:(G,p,s)=>{s.d(p,{C:()=>h});var f=s(56848),r=s(14230),d=s(93756),g=s(22560),_=s(69263);let h=(()=>{class l extends f.K{constructor(m,w){super(m,w),this.state$=this.select(d.L.selectSettingsState),this.currentSection$=this.select(d.L.selectCurrentSection),this.dev$=this.select(d.L.selectDev),this.hour$=this.select(d.L.selectHour),this.themeEffective$=this.select(d.L.selectThemeEffective),this.themeForHour$=this.select(d.L.selectThemeForHour)}changeTheme(m){this.dispatch(r.V.changeTheme({theme:m}))}setDev(m){this.dispatch(r.V.setDev({dev:m}))}}return l.\u0275fac=function(m){return new(m||l)(g.LFG(g.R0b),g.LFG(_.yh))},l.\u0275prov=g.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},41581:(G,p,s)=>{s.r(p),s.d(p,{COMPONENTS:()=>j,CONTAINERS:()=>z,GamesFeatureModule:()=>V,ROUTES:()=>A});var f=s(94666),r=s(2508),d=s(97364),g=s(63227),_=s(39878),h=s(50253),l=s(68951),S=s(50635),m=s(1039),w=s(85058),b=s(3651),T=s(43271),v=s(63444),c=s(98205),C=s(34579),y=s(43654),F=s(40729),U=s(19028),P=s(60180),e=s(22560),O=s(52756),I=s(75584);const N=["addGameRomInput"];function D(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.navigateToSectionGames())}),e._uU(1," Games "),e.qZA()}if(2&n){const t=e.oxw();e.ekj("activated",t.gamesSection)}}function E(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.navigateToSectionSystems())}),e._uU(1," Systems "),e.qZA()}if(2&n){const t=e.oxw();e.ekj("activated",t.systemsSection)}}function k(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.handleAddGameFormDisplay(!0))}),e._uU(1," + Add Game "),e.qZA()}}function M(n,i){if(1&n&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Oqu(t.name)}}function J(n,i){if(1&n&&(e.TgZ(0,"span",17),e._UZ(1,"span"),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Udp("width",100*t.progression,"%")}}function q(n,i){if(1&n&&(e.ynx(0),e.YNc(1,M,2,1,"span",14),e.YNc(2,J,2,2,"span",15),e.BQk()),2&n){const t=i.ngIf;e.xp6(1),e.Q6J("ngIf",t.name),e.xp6(1),e.Q6J("ngIf",t.progression>-1)}}function L(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){const u=e.CHM(t).$implicit,Z=e.oxw();return e.KtG(Z.handleSelectSoftware(u))}),e.TgZ(1,"span",13),e._uU(2),e.qZA(),e._uU(3),e.YNc(4,q,3,2,"ng-container",9),e.ALo(5,"async"),e.qZA()}if(2&n){const t=i.$implicit,a=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(1),e.hij(" "," "," "),e.xp6(1),e.Q6J("ngIf",e.lcZ(5,3,a.softwaresFacade.selectSoftwareState(t)))}}function R(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"dt"),e._uU(2,"CID"),e.qZA(),e.TgZ(3,"dd"),e._uU(4),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(4),e.Oqu(t.getSoftwareCid(t.softwareSelected))}}function Q(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.handleSoftwareCheck(o.softwareSelected))}),e._uU(1," Check Software "),e.qZA()}}function K(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"aside",19)(1,"h2",20,21),e._uU(3),e.qZA(),e.TgZ(4,"dl",22)(5,"dt"),e._uU(6,"Platform"),e.qZA(),e.TgZ(7,"dd"),e._uU(8),e.qZA(),e.TgZ(9,"dt"),e._uU(10,"Version"),e.qZA(),e.TgZ(11,"dd"),e._uU(12),e.qZA(),e.TgZ(13,"dt"),e._uU(14,"File"),e.qZA(),e.TgZ(15,"dd"),e._uU(16),e.qZA(),e.TgZ(17,"dt"),e._uU(18,"Size"),e.qZA(),e.TgZ(19,"dd"),e._uU(20),e.qZA(),e.YNc(21,R,5,1,"ng-container",9),e.TgZ(22,"dt"),e._uU(23,"CRC32"),e.qZA(),e.TgZ(24,"dd"),e._uU(25),e.qZA(),e.TgZ(26,"dt"),e._uU(27,"MD5"),e.qZA(),e.TgZ(28,"dd"),e._uU(29),e.qZA(),e.TgZ(30,"dt"),e._uU(31,"SHA-1"),e.qZA(),e.TgZ(32,"dd"),e._uU(33),e.qZA(),e.TgZ(34,"dt"),e._uU(35,"SHA-256"),e.qZA(),e.TgZ(36,"dd"),e._uU(37),e.qZA()(),e.TgZ(38,"div",23)(39,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.handleSoftwarePlay(o.softwareSelected))}),e._uU(40," Play Software "),e.qZA(),e.YNc(41,Q,2,0,"button",25),e.ALo(42,"async"),e.TgZ(43,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.handleSoftwareUninstall(o.softwareSelected))}),e._uU(44," Archive Software "),e.qZA(),e.TgZ(45,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.handleSoftwareDelete(o.softwareSelected))}),e._uU(46," Delete Software "),e.qZA()(),e.TgZ(47,"div",27)(48,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.deselectSoftware())}),e._uU(49," Back "),e.qZA()()()}if(2&n){const t=e.MAs(2),a=e.oxw(2);e.Q6J("uiAriaLabelledby",t),e.xp6(3),e.hij(" ",a.softwareSelected.name," "),e.xp6(5),e.Oqu(a.getSoftwareSystemLabel(a.softwareSelected)),e.xp6(4),e.Oqu(a.softwareSelected.version),e.xp6(4),e.Oqu(a.getSoftwareFile(a.softwareSelected)),e.xp6(4),e.AsE("",a.getSoftwareSize(a.softwareSelected)," (",a.getSoftwareHumanSize(a.softwareSelected),")"),e.xp6(1),e.Q6J("ngIf","game"===a.softwareSelected.type),e.xp6(4),e.AsE("",a.getSoftwareCrcDecimal(a.softwareSelected)," (0x",a.getSoftwareCrcHexadecimal(a.softwareSelected),")"),e.xp6(4),e.Oqu(a.getSoftwareMd5(a.softwareSelected)),e.xp6(4),e.Oqu(a.getSoftwareSha1(a.softwareSelected)),e.xp6(4),e.Oqu(a.getSoftwareSha256(a.softwareSelected)),e.xp6(4),e.Q6J("ngIf",e.lcZ(42,18,a.settingsFacade.dev$)),e.xp6(2),e.Q6J("disabled",a.isSoftwareArchiveDisabled(a.softwareSelected)),e.uIk("tabindex",a.isSoftwareArchiveDisabled(a.softwareSelected)?-1:0),e.xp6(2),e.Q6J("disabled",a.isSoftwareDeleteDisabled(a.softwareSelected)),e.uIk("tabindex",a.isSoftwareDeleteDisabled(a.softwareSelected)?-1:0)}}function H(n,i){if(1&n){const t=e.EpF();e.YNc(0,K,50,20,"ng-template",18),e.NdJ("overlayKeydownEscape",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deselectSoftware())})}}function Y(n,i){if(1&n&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function $(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"aside",19)(1,"h2",20,21),e._uU(3,"Add Game"),e.qZA(),e.TgZ(4,"form",29)(5,"div")(6,"label")(7,"span"),e._uU(8,"Name"),e.qZA(),e._UZ(9,"input",30),e.qZA()(),e.TgZ(10,"div")(11,"label")(12,"span"),e._uU(13,"System"),e.qZA(),e.TgZ(14,"select",31),e._UZ(15,"option",32),e.YNc(16,Y,2,2,"option",33),e.qZA()()(),e.TgZ(17,"div")(18,"label")(19,"span"),e._uU(20,"Version"),e.qZA(),e._UZ(21,"input",34),e.qZA()(),e.TgZ(22,"div")(23,"label")(24,"span"),e._uU(25,"ROM"),e.qZA(),e._UZ(26,"input",35,36),e.qZA()()(),e.TgZ(28,"div",27)(29,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.handleAddGameFormDisplay(!1))}),e._uU(30," Cancel "),e.qZA(),e.TgZ(31,"button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.handleAddGameFormSubmit())}),e._uU(32," Add "),e.qZA()()()}if(2&n){const t=e.MAs(2),a=e.oxw(2);e.Q6J("uiAriaLabelledby",t),e.xp6(4),e.Q6J("formGroup",a.addGameForm),e.xp6(12),e.Q6J("ngForOf",a.dataService.platforms),e.xp6(15),e.Q6J("disabled",a.addGameForm.invalid),e.uIk("tabindex",a.addGameForm.invalid?-1:0)}}function B(n,i){if(1&n){const t=e.EpF();e.YNc(0,$,33,5,"ng-template",18),e.NdJ("overlayKeydownEscape",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.handleAddGameFormDisplay(!1))})}}let x=(()=>{class n{constructor(t,a,o,u,Z,W){this.layoutFacade=t,this.routerFacade=a,this.settingsFacade=o,this.softwaresFacade=u,this.dataService=Z,this.changeDetectorRef=W,this.cssClassGamesPage=!0,this.addGameForm=new r.cw({name:new r.NI("",r.kI.required),system:new r.NI("",r.kI.required),version:new r.NI("",r.kI.required),rom:new r.NI("",r.kI.required)}),this.addGameFormOpened=!1,this.appsSection="",this.softwares=[],this.softwaresShown=[],this.softwareSelected=null,this.softwareActionsLocked=!1,this.destroyed$=new h.x}get gamesSection(){return"games"===this.appsSection}get systemsSection(){return"systems"===this.appsSection}get addGameFormShown(){return this.addGameFormOpened}ngOnInit(){this.routerFacade.routeData$.pipe((0,l.R)(this.destroyed$),(0,S.U)(({appsSection:t})=>t)).subscribe(t=>{this.appsSection=t,this.refreshSoftwaresShown(),this.changeDetectorRef.markForCheck()}),this.softwaresFacade.softwares$.pipe((0,l.R)(this.destroyed$)).subscribe(t=>{this.softwares=t,this.refreshSoftwaresShown(),this.changeDetectorRef.markForCheck()})}deselectSoftware(){this.softwareSelected=null,this.changeDetectorRef.markForCheck()}getSoftwareDetails(t){return(0,y.IQ)(t)}getSoftwareLabel(t){return t.name}getSoftwareFile(t){return"game"===t.type?t.rom_name:P.EZ(t.wasm_source)}getSoftwareCid(t){return"game"===t.type?t.rom_source.substring(7):""}getSoftwareCrcDecimal(t){return(0,c.cZ)(t)}getSoftwareCrcHexadecimal(t){return(0,U.X0)((0,c.cZ)(t))}getSoftwareHumanSize(t){return(0,F.o)((0,c.h5)(t))}getSoftwareSize(t){return(0,c.h5)(t)}getSoftwareMd5(t){return(0,c._s)(t)}getSoftwareSha1(t){return(0,c.P_)(t)}getSoftwareSha256(t){return(0,c.Ec)(t)}getSoftwareSystemLabel(t){return this.dataService.getPlatform(t.system)?.name||t.system}handleAddGameFormDisplay(t){(t?this.addGameFormOpened:!this.addGameFormOpened)||(t||this.resetAddGameForm(),this.addGameFormOpened=!this.addGameFormOpened,this.changeDetectorRef.markForCheck())}handleAddGameFormSubmit(){if(!this.addGameFormOpened)return;this.addGameForm.disable();const{name:t,system:a,version:o}=this.addGameForm.getRawValue();this.softwaresFacade.installGameLocal(t,a,o,this.addGameRomInput.nativeElement.files[0]),this.resetAddGameForm(),this.addGameFormOpened=!1,this.changeDetectorRef.markForCheck(),this.navigateToSectionGames()}handleSelectSoftware(t){t!==this.softwareSelected&&(this.softwareSelected=t,this.changeDetectorRef.markForCheck())}handleSoftwareCheck(t){this.softwaresFacade.check(t)}handleSoftwareDelete(t){this.handleSoftwareAction("removeAsking",t)}handleSoftwareInstall(t){this.handleSoftwareAction("install",t)}handleSoftwarePlay(t){this.handleSoftwareAction("play",t)}handleSoftwareUninstall(t){this.handleSoftwareAction("uninstallAsking",t)}isSoftwareArchiveDisabled(t){return(0,c.e1)(t)}isSoftwareDeleteDisabled(t){return(0,c.It)(t)}navigateToSectionGames(){return this.navigateToSection("games")}navigateToSectionSystems(){return this.navigateToSection("systems")}handleSoftwareAction(t,a){this.deselectSoftware(),this.softwaresFacade.dispatch((0,v.R[t])({software:a}))}navigateToSection(t){if(t!==this.appsSection)return"games"===t?this.routerFacade.navigateToGames():this.routerFacade.navigateToGamesSection(t)}refreshSoftwaresShown(){this.softwaresShown=this.softwares.filter("games"===this.appsSection?c._R:c.r9)}resetAddGameForm(){this.addGameForm.reset({name:"",system:"",version:"",rom:""}),this.addGameForm.enable()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w.i),e.Y36(b.f),e.Y36(T.C),e.Y36(C.b),e.Y36(m.D),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-games-page"]],viewQuery:function(t,a){if(1&t&&e.Gf(N,5),2&t){let o;e.iGM(o=e.CRH())&&(a.addGameRomInput=o.first)}},hostVars:2,hostBindings:function(t,a){2&t&&e.ekj("games-page",a.cssClassGamesPage)},decls:18,vars:15,consts:[["role","menubar",1,"page-menu",3,"uiAriaLabelledby"],[1,"sr-only"],["gamesMenuTitle",""],["type","button","role","menuitem","class","page-menu-item","tabindex","0",3,"activated","click",4,"ngIf"],[1,"page-menu-separator"],["type","button","role","menuitem","class","page-menu-item action","tabindex","0",3,"click",4,"ngIf"],["role","menu",3,"uiAriaLabelledby"],["softwaresTitle",""],["type","button","role","menuitem","tabindex","0","class","game-item",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","role","menuitem","tabindex","0",1,"page-menu-item",3,"click"],["type","button","role","menuitem","tabindex","0",1,"page-menu-item","action",3,"click"],["type","button","role","menuitem","tabindex","0",1,"game-item",3,"click"],[1,"label"],["class","state",4,"ngIf"],["class","progress",4,"ngIf"],[1,"state"],[1,"progress"],["uiModal","",3,"overlayKeydownEscape"],["role","alertdialog",1,"main-dialog","games-dialog",3,"uiAriaLabelledby"],[1,"main-dialog-title"],["appsDialogTitle",""],[1,"main-dialog-content"],[1,"main-dialog-listbox"],["type","button","tabindex","0",1,"listbox-button",3,"click"],["type","button","class","listbox-button","tabindex","0",3,"click",4,"ngIf"],["type","button",1,"listbox-button",3,"disabled","click"],["role","menubar",1,"main-dialog-actions"],["type","button","role","menuitem","tabindex","0",1,"main-dialog-action",3,"click"],[1,"form",3,"formGroup"],["type","text","formControlName","name","maxlength","128","placeholder","Example: Super Mario Bros"],["formControlName","system"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","version","maxlength","64","placeholder","Example: Europe"],["type","file","formControlName","rom"],["addGameRomInput",""],["type","button","role","menuitem",1,"main-dialog-action",3,"disabled","click"],[3,"value"]],template:function(t,a){if(1&t&&(e.TgZ(0,"nav",0)(1,"h3",1,2),e._uU(3,"Games Menu"),e.qZA(),e.YNc(4,D,2,2,"button",3),e.ALo(5,"async"),e.YNc(6,E,2,2,"button",3),e.ALo(7,"async"),e._UZ(8,"hr",4),e.YNc(9,k,2,0,"button",5),e.ALo(10,"async"),e.qZA(),e.TgZ(11,"section",6)(12,"h3",1,7),e._uU(14),e.qZA(),e.YNc(15,L,6,5,"button",8),e.qZA(),e.YNc(16,H,1,0,null,9),e.YNc(17,B,1,0,null,9)),2&t){const o=e.MAs(2),u=e.MAs(13);e.Q6J("uiAriaLabelledby",o),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,9,a.settingsFacade.dev$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,11,a.settingsFacade.dev$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(10,13,a.settingsFacade.dev$)),e.xp6(2),e.Q6J("uiAriaLabelledby",u),e.xp6(3),e.hij(" ",a.appsSection," "),e.xp6(1),e.Q6J("ngForOf",a.softwaresShown),e.xp6(1),e.Q6J("ngIf",a.softwareSelected),e.xp6(1),e.Q6J("ngIf",a.addGameFormShown)}},dependencies:[f.sg,f.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.nD,r.sg,r.u,O.N,I.V,f.Ov],encapsulation:2,changeDetection:0}),n})();const j=[],z=[x],A=[{path:"",pathMatch:"full",component:x,title:"Games",data:{appsSection:"games"}},{path:"systems",component:x,title:"Systems",data:{appsSection:"systems"}}];let V=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.ez,d.Bz.forChild(A),r.UX,g.N,_.v]}),n})()}}]);
//# sourceMappingURL=apps_retroweb_src_app_features_games_games-feature_module_ts.c51d9b6eb5109590.js.map